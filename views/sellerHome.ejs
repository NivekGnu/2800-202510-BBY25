<%- include('templates/header') %>

<div class="flex flex-col h-screen bg-gray-50">
  <!-- Header -->
  <header class="flex-none p-4 bg-white shadow">
    <div class="flex items-center justify-between">
      <h1 class="text-lg font-semibold">Your Listings</h1>
      <button id="signout" class="text-sm text-gray-600 hover:text-gray-800">Sign out</button>
    </div>
    <script>
      document.getElementById("signout")
        .addEventListener("click", () => window.location.href = "/logout");
    </script>
  </header>

  <!-- Main -->
  <main class="flex-1 overflow-auto p-2">
    <% if (postings.length === 0) { %>
      <p class="text-center text-gray-500 mt-4">No postings yet.</p>
    <% } else { %>
      <div class="grid grid-cols-2 gap-2">
        <% postings.forEach(p => { %>
          <a href="/post/<%= p.id %>" class="block bg-white rounded-lg shadow overflow-hidden">
            <!-- 1:1 image box -->
            <div class="w-full aspect-square bg-gray-100">
              <img
                src="<%= p.thumbSrc %>"
                alt="<%= p.produce %>"
                class="object-cover w-full h-full"
              />
            </div>
            <!-- Text -->
            <div class="p-2">
              <div class="text-sm font-semibold text-gray-900 mb-1">$<%= p.price %></div>
              <div class="text-xs text-gray-700 truncate"><%= p.produce %></div>
              <div class="text-xs text-gray-500"><%= p.mileage %> miles</div>
            </div>
          </a>
        <% }) %>
      </div>
    <% } %>
  </main>

  <%- include('templates/footer') %>
</div>
