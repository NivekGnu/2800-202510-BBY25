<%- include('templates/header') %>

<div class="flex flex-col min-h-screen pb-24 bg-gray-50">
  <div class="max-w-2xl mx-auto p-6 bg-white rounded-2xl shadow-lg mt-6">
    <h1 class="text-3xl font-bold mb-6 text-center"><%= title %></h1>
    <form
      action="/post/<%= currentPost.id %>/edit"
      method="POST"
      enctype="multipart/form-data"
      class="space-y-6"
    >
      <!-- Category -->
      <div>
        <label for="category" class="block text-sm font-medium text-gray-700 mb-1">
          Category
        </label>
        <input
          type="text"
          id="category"
          name="category"
          required
          value="<%= currentPost.category
                  ? currentPost.category.charAt(0).toUpperCase() 
                  + currentPost.category.slice(1)
                  : '' %>"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <!-- Produce -->
      <div>
        <label for="produce" class="block text-sm font-medium text-gray-700 mb-1">
          Produce
        </label>
        <input
          type="text"
          id="produce"
          name="produce"
          required
          value="<%= currentPost.produce %>"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <!-- Quantity -->
      <div>
        <label for="quantity" class="block text-sm font-medium text-gray-700 mb-1">
          Quantity
        </label>
        <input
          type="number"
          id="quantity"
          name="quantity"
          required
          value="<%= currentPost.quantity %>"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <!-- Price -->
      <div>
        <label for="price" class="block text-sm font-medium text-gray-700 mb-1">
          Price
        </label>
        <input
          type="text"
          id="price"
          name="price"
          required
          value="<%= currentPost.price %>"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
        />
      </div>

      <!-- Description -->
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
          Description
        </label>
        <textarea
          id="description"
          name="description"
          rows="4"
          maxlength="200"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
        ><%= currentPost.description %></textarea>
      </div>

      <!-- Image Upload (optional) -->
      <div>
        <label for="image" class="block text-sm font-medium text-gray-700 mb-1">
          Change Image (leave empty to keep current)
        </label>
        <input
          type="file"
          id="image"
          name="image"
          accept="image/*"
          class="block w-full file:py-2 file:px-4 file:border file:rounded-lg file:bg-gray-100 hover:file:bg-gray-200"
        />
        <p class="mt-2 text-sm text-gray-600">Current image:</p>
        <img
          src="<%= currentPost.imageUrl %>"
          alt="Current listing image"
          class="mt-1 rounded-md max-w-xs"
        />
      </div>

      <!-- Submit -->
      <div class="text-center">
        <button
          type="submit"
          class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-6 rounded-lg transition"
        >
          Update Post
        </button>
      </div>
    </form>
  </div>

  <!-- Seller bottom navbar -->
  <%- include('templates/navbar_seller') %>
</div>

<%- include('templates/footer') %>
