<%- include("templates/header") %>

<div class="max-w-xl mx-auto p-6 bg-white rounded-2xl shadow-lg mt-12">

  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold text-gray-800"><%= title %></h1>
    <button id="signout" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-full transition">Sign Out</button>
  </div>
      
  <form action="/profile" method="post" enctype="multipart/form-data" class="space-y-6">
    <div>
      <label class="block text-gray-700 font-medium mb-2" for="firstName">First Name</label>
      <input
        id="firstName"
        name="firstName"
        value="<%= user.firstName %>"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
      >
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-2" for="lastName">Last Name</label>
      <input
        id="lastName"
        name="lastName"
        value="<%= user.lastName %>"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
      >
    </div>

    <div>
      <label class="block text-gray-700 font-medium mb-2" for="email">Email</label>
      <input
        id="email"
        name="email"
        type="email"
        value="<%= user.email %>"
        required
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
      >
    </div>

        <!-- Change the buyer's profile photo/image -->
    <div class="content-center">
        <label for="image" class="block text-sm font-medium text-gray-700 mb-1">Image Upload</label>
        <input type="file" id="image" name="image" accept="image/*" capture="environment" 
          class="block w-full text-sm text-gray-600 file:py-2 file:px-4 file:border file:border-gray-300 file:rounded-lg file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200" />
        <!-- Checks with default image name -->
        <% if (userImage.imageUrl !== '/img/placeholder-large.png') { %> 
          <p class="mt-2 text-sm text-gray-600">Current posted image:</p>
          <img src="<%= userImage.imageUrl %>" alt="User image" class="mt-1 rounded-md" style="max-width:150px;" />
        <% } %>
      </div>

    <div class="text-center">
      <button
        type="submit"
        class="px-6 py-2 bg-green-600 text-white font-semibold rounded-full shadow hover:bg-green-700 transition">
        Save
      </button>
    </div>
  </form>
</div>

<script>
  document.getElementById("signout")
      .addEventListener("click", () => {
          window.location.href = "/logout"
      });
</script>

<%- include("templates/footer") %>

